import{z as I,r as f,R as L,c as m,a as N,w as q,o as d,e as i,b as t,t as o,F as g,f as _,h as M,x as $,d as S,m as O,Q as T}from"./app.ff9256fe.js";import{F as G}from"./FrontLayout.9b9bcf85.js";import"./_plugin-vue_export-helper.cdc0426e.js";const P={key:0,class:"relative mx-auto max-w-7xl p-6 sm:p-10 bg-white/60 backdrop-blur-xl ring-1 ring-emerald-100 rounded-3xl shadow-2xl overflow-hidden"},Q={class:"relative"},U={class:"mt-10 overflow-x-auto"},Z={class:"w-full border-separate border-spacing-0 text-left text-sm"},H={class:"bg-emerald-600/90 text-white font-semibold px-4 py-3 text-center sticky top-0 shadow-md rounded-tl-2xl"},J={class:"flex items-center justify-center gap-2"},K={class:"inline-block rounded-full bg-emerald-500/30 px-2 py-0.5 text-xs"},W=["aria-pressed"],X={class:"bg-emerald-600/90 text-white font-semibold px-4 py-3 text-center sticky top-0 shadow-md"},Y={class:"flex items-center justify-center gap-2"},ee={class:"inline-block rounded-full bg-emerald-500/30 px-2 py-0.5 text-xs"},te=["aria-pressed"],se={class:"bg-emerald-600/90 text-white font-semibold px-4 py-3 text-center sticky top-0 shadow-md"},le={class:"flex items-center justify-center gap-2"},ae={class:"inline-block rounded-full bg-emerald-500/30 px-2 py-0.5 text-xs"},oe=["aria-pressed"],ne={class:"bg-emerald-600/90 text-white font-semibold px-4 py-3 text-center sticky top-0 shadow-md rounded-tr-2xl"},de={class:"flex items-center justify-center gap-2"},ie={class:"inline-block rounded-full bg-emerald-500/30 px-2 py-0.5 text-xs"},re={class:"bg-white/70 backdrop-blur"},ue={class:"[&>td]:align-top [&>td]:p-5 [&>td:not(:last-child)]:border-r [&>td:not(:last-child)]:border-emerald-100"},ce={class:"space-y-2"},pe={class:"flex items-center gap-2 cursor-pointer group"},me=["id","value","checked","onChange"],xe={class:"group-hover:text-emerald-700"},he={class:"space-y-2"},ve={class:"flex items-center gap-2 cursor-pointer group"},be=["id","value","checked","onChange"],fe={class:"group-hover:text-emerald-700"},ge={class:"space-y-2"},_e={class:"flex items-center gap-2 cursor-pointer group"},ye=["id","value","checked","onChange"],ke={class:"group-hover:text-emerald-700"},we={class:"space-y-2"},Ce={class:"flex items-center gap-2 cursor-pointer group"},ze=["id","value"],je={class:"group-hover:text-emerald-700"},$e={key:0,class:"mt-3 text-sm text-rose-600"},Se={class:"mt-10 flex justify-center"},Be=["disabled"],Ae={key:1,class:"mx-auto mt-16 max-w-3xl rounded-3xl bg-white/70 backdrop-blur-xl p-8 text-center ring-1 ring-emerald-100 shadow-2xl"},Fe={class:"flex flex-col items-center gap-6"},Ve={class:"text-sm text-emerald-700/80","aria-live":"polite"},Re={class:"flex flex-wrap justify-center gap-4 mt-4"},De=["disabled"],Ne=I({__name:"SelectorForm",props:{fields:{}},setup(B){const r=B,n=f(new Set),u=f(null),C=f(!1),c=f(null),x=L({selected:[],method:""}),h=m(()=>{var l,s,e,a;return(a=(e=(s=(l=r.fields)==null?void 0:l.options)==null?void 0:s.years)==null?void 0:e.options)!=null?a:[]}),v=m(()=>{var l,s,e,a;return(a=(e=(s=(l=r.fields)==null?void 0:l.options)==null?void 0:s.objects)==null?void 0:e.options)!=null?a:[]}),b=m(()=>{var l,s,e,a;return(a=(e=(s=(l=r.fields)==null?void 0:l.options)==null?void 0:s.places)==null?void 0:e.options)!=null?a:[]}),z=m(()=>{var l,s,e,a;return(a=(e=(s=(l=r.fields)==null?void 0:l.options)==null?void 0:s.method)==null?void 0:e.options)!=null?a:[]});function y(l){return n.value.has(l)}function k(l){n.value.has(l)?n.value.delete(l):n.value.add(l),n.value.size>0&&u.value&&(c.value=null)}function w(l){l.every(e=>n.value.has(e))?l.forEach(e=>n.value.delete(e)):l.forEach(e=>n.value.add(e)),n.value.size>0&&u.value&&(c.value=null)}const p=l=>l.reduce((s,e)=>s+(n.value.has(e)?1:0),0),A=m(()=>n.value.size>0&&!!u.value),F=m(()=>{var s,e;const l=(e=(s=z.value.find(a=>a.id===u.value))==null?void 0:s.label)!=null?e:"\u2014";return`Izv\u0113l\u0113ti filtri: ${n.value.size}. Metode: ${l}.`});function V(){if(!A.value){c.value="L\u016Bdzu, izv\u0113lies vismaz vienu filtru un metodi.";return}C.value=!0}function j(){x.selected=Array.from(n.value),x.method=u.value,x.post("/report",{preserveState:!1,replace:!0})}function R(){window.open("https://www.pilsetacilvekiem.lv/ziedot/","_blank","noopener,noreferrer"),j()}function D(){window.open("/apis/request","_blank","noopener,noreferrer")}const E=[{text:"Atskaites",href:"/report"}];return(l,s)=>(d(),N(G,{title:"Atskaites",breadcrumbs:E},{default:q(()=>[C.value?(d(),i("section",Ae,[t("div",Fe,[s[8]||(s[8]=t("i",{class:"fa-solid fa-heart text-emerald-500 text-8xl drop-shadow-md","aria-hidden":"true"},null,-1)),s[9]||(s[9]=t("h3",{class:"text-2xl font-bold text-emerald-900"},[S("\u201CPils\u0113ta cilv\u0113kiem\u201D pied\u0101v\u0101 datus "),t("b",null,"bez maksas"),S(".")],-1)),s[10]||(s[10]=t("p",{class:"text-emerald-800 max-w-md"}," Atbalsti projektu ar ziedojumu! Datu lejupiel\u0101de turpin\u0101sies, pat ja izlasi bez ziedojuma. ",-1)),t("p",Ve,o(F.value),1),t("div",Re,[t("button",{type:"button",onClick:R,class:"px-6 py-3 rounded-2xl bg-emerald-600 text-white font-medium shadow-md hover:bg-emerald-700 focus:ring-4 focus:ring-emerald-300"}," Ziedot un sa\u0146emt datus "),t("button",{type:"button",disabled:$(x).processing,onClick:j,class:"px-6 py-3 rounded-2xl border border-emerald-300 bg-white text-emerald-700 font-medium hover:bg-emerald-50 focus:ring-4 focus:ring-emerald-200 disabled:opacity-50"}," N\u0113, tikai sa\u0146emt datus ",8,De)])])])):(d(),i("section",P,[s[7]||(s[7]=t("div",{"aria-hidden":"true",class:"pointer-events-none absolute inset-0"},[t("div",{class:"absolute -inset-x-40 -top-32 h-72 bg-gradient-to-r from-emerald-400/30 via-emerald-200/20 to-emerald-400/30 blur-3xl rotate-6"})],-1)),t("div",Q,[s[5]||(s[5]=t("h1",{class:"text-3xl sm:text-4xl font-extrabold text-emerald-900 text-center tracking-tight"},"Veloskait\u012B\u0161anas Atskaites",-1)),s[6]||(s[6]=t("p",{class:"mt-3 text-center text-emerald-800/80 max-w-2xl mx-auto"}," Izv\u0113lies gadus, punktus un metodi, lai redz\u0113tu detaliz\u0113tus grafikus par R\u012Bgas velosatiksmi. ",-1)),t("div",U,[t("table",Z,[t("thead",null,[t("tr",null,[t("th",H,[t("div",J,[t("span",null,o(r.fields.options.years.label),1),t("span",K,o(p(h.value.map(e=>e.id))),1)]),t("button",{type:"button",class:"mt-1 text-xs underline decoration-emerald-200 hover:text-emerald-100",onClick:s[0]||(s[0]=e=>w(h.value.map(a=>a.id))),"aria-pressed":p(h.value.map(e=>e.id))===h.value.length}," Select all ",8,W)]),t("th",X,[t("div",Y,[t("span",null,o(r.fields.options.objects.label),1),t("span",ee,o(p(v.value.map(e=>e.id))),1)]),t("button",{type:"button",class:"mt-1 text-xs underline decoration-emerald-200 hover:text-emerald-100",onClick:s[1]||(s[1]=e=>w(v.value.map(a=>a.id))),"aria-pressed":p(v.value.map(e=>e.id))===v.value.length}," Select all ",8,te)]),t("th",se,[t("div",le,[t("span",null,o(r.fields.options.places.label),1),t("span",ae,o(p(b.value.map(e=>e.id))),1)]),t("button",{type:"button",class:"mt-1 text-xs underline decoration-emerald-200 hover:text-emerald-100",onClick:s[2]||(s[2]=e=>w(b.value.map(a=>a.id))),"aria-pressed":p(b.value.map(e=>e.id))===b.value.length}," Select all ",8,oe)]),t("th",ne,[t("div",de,[t("span",null,o(r.fields.options.method.label),1),t("span",ie,o(u.value?1:0),1)])])])]),t("tbody",re,[t("tr",ue,[t("td",null,[t("ul",ce,[(d(!0),i(g,null,_(h.value,e=>(d(),i("li",{key:e.id},[t("label",pe,[t("input",{type:"checkbox",id:`y-${e.id}`,value:e.id,checked:y(e.id),onChange:a=>k(e.id),class:"accent-emerald-600 h-5 w-5 rounded-md border-emerald-300 focus:ring-2 focus:ring-emerald-500"},null,40,me),t("span",xe,o(e.label),1)])]))),128))])]),t("td",null,[t("ul",he,[(d(!0),i(g,null,_(v.value,e=>(d(),i("li",{key:e.id},[t("label",ve,[t("input",{type:"checkbox",id:`o-${e.id}`,value:e.id,checked:y(e.id),onChange:a=>k(e.id),class:"accent-emerald-600 h-5 w-5 rounded-md border-emerald-300 focus:ring-2 focus:ring-emerald-500"},null,40,be),t("span",fe,o(e.label),1)])]))),128))])]),t("td",null,[t("ul",ge,[(d(!0),i(g,null,_(b.value,e=>(d(),i("li",{key:e.id},[t("label",_e,[t("input",{type:"checkbox",id:`p-${e.id}`,value:e.id,checked:y(e.id),onChange:a=>k(e.id),class:"accent-emerald-600 h-5 w-5 rounded-md border-emerald-300 focus:ring-2 focus:ring-emerald-500"},null,40,ye),t("span",ke,o(e.label),1)])]))),128))])]),t("td",null,[t("ul",we,[(d(!0),i(g,null,_(z.value,e=>(d(),i("li",{key:e.id},[t("label",Ce,[O(t("input",{type:"radio",name:"method",id:`m-${e.id}`,value:e.id,"onUpdate:modelValue":s[3]||(s[3]=a=>u.value=a),class:"accent-emerald-600 h-4 w-4 border-emerald-300 focus:ring-2 focus:ring-emerald-500",onChange:s[4]||(s[4]=a=>c.value=null)},null,40,ze),[[T,u.value]]),t("span",je,o(e.label),1)])]))),128))]),c.value?(d(),i("p",$e,o(c.value),1)):M("",!0)])])])])]),t("div",Se,[t("button",{disabled:$(x).processing,onClick:V,class:"px-8 py-3 text-lg font-semibold rounded-2xl bg-emerald-600 text-white shadow-lg hover:bg-emerald-700 focus:outline-none focus:ring-4 focus:ring-emerald-300 transition transform hover:-translate-y-0.5 active:translate-y-0 disabled:opacity-50 disabled:cursor-not-allowed"}," R\u0101d\u012Bt grafiku ",8,Be),t("button",{onClick:D,class:"mx-2 px-8 py-3 text-lg font-semibold rounded-2xl bg-emerald-600 text-white shadow-lg hover:bg-emerald-700 focus:outline-none focus:ring-4 focus:ring-emerald-300 transition transform hover:-translate-y-0.5 active:translate-y-0 disabled:opacity-50 disabled:cursor-not-allowed"}," V\u0113lies integr\u0113t datus? ")])])]))]),_:1}))}});export{Ne as default};
