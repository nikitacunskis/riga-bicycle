import{u as v,o as x,c as C,w as d,b as o,a as l,h as s,g as n,n as D,m as S,t as k}from"./app.2796258c.js";import{_ as V}from"./AdminLayout.249c7c2e.js";import{A as F}from"./AuthenticationCard.3e448dbd.js";import{_ as p}from"./InputError.87eff21a.js";import{_}from"./InputLabel.dd62db22.js";import{_ as m}from"./PrimaryButton.963fe689.js";import{_ as h}from"./TextInput.da01bc48.js";import"./_plugin-vue_export-helper.cdc0426e.js";const N=l("h2",null,"Create Event",-1),$=["onSubmit"],j={class:"mt-4"},B={class:"flex items-center justify-end mt-4"},z={__name:"Create",setup(O){const e=v({date:"",weather:""});let u="";const c=()=>{var t=new Date,a=String(t.getDate()).padStart(2,"0"),r=String(t.getMonth()+1).padStart(2,"0"),i=t.getFullYear();e.date=i+"-"+r+"-"+a},g=()=>{let t=new Date(e.date).toISOString();var a=new Date;if(t!="NaN"){if(a<=t)return!0;u="Date can't be found if you set future date"}return!1},f=()=>{(e.date!==""||g())&&axios.post("/dashboard/weather/get/",{date:e.date}).then(t=>{let a=Object.keys(t.data)[Object.keys(t.data).length-1],r=JSON.parse(t.data[a].json_data),i=r.main.temp-273.15,b=r.main.temp_max-273.15;e.weather="Gaisa temperat\u016Bra: "+i.toFixed(2)+" "+r.weather[0].description+"(Maksim\u0101l\u0101 temperat\u016Bra: "+b.toFixed(2)+" )"})},w=()=>{c(),f()},y=()=>{e.post(route("dashboard.events.store"),{onFinish:()=>console.log("event created")})};return w(),(t,a)=>(x(),C(V,{title:"Dashboard - Create Event"},{default:d(()=>[o(F,null,{default:d(()=>[N,l("form",{onSubmit:S(y,["prevent"])},[l("div",null,[o(_,{for:"date",value:"Date"}),o(h,{id:"date",modelValue:s(e).date,"onUpdate:modelValue":a[0]||(a[0]=r=>s(e).date=r),type:"date",class:"mt-1 block w-full",required:"",autofocus:"",autocomplete:"date"},null,8,["modelValue"]),o(m,{onClick:c,type:"button"},{default:d(()=>[n(" Today ")]),_:1}),o(p,{class:"mt-2",message:s(e).errors.date},null,8,["message"])]),l("div",j,[o(_,{for:"weather",value:"Weather"}),o(h,{id:"weather",modelValue:s(e).weather,"onUpdate:modelValue":a[1]||(a[1]=r=>s(e).weather=r),type:"text",class:"mt-1 block w-full",required:""},null,8,["modelValue"]),o(m,{onClick:f,type:"button"},{default:d(()=>[n(" Get weather ")]),_:1}),o(p,{class:"mt-2",message:s(e).errors.weather},null,8,["message"])]),l("div",B,[o(m,{class:D(["ml-4",{"opacity-25":s(e).processing}]),disabled:s(e).processing},{default:d(()=>[n(" Create ")]),_:1},8,["class","disabled"])])],40,$),n(" "+k(s(u)),1)]),_:1})]),_:1}))}};export{z as default};
